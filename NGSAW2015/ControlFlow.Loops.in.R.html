<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link rel="stylesheet" href="book.css" type="text/css" />
</head>
<body>
<h2 id="r&#35821;&#35328;&#20013;&#30340;&#25511;&#21046;&#27969;&#21644;&#24490;&#29615;">R&#35821;&#35328;&#20013;&#30340;&#25511;&#21046;&#27969;&#21644;&#24490;&#29615;</h2>
<h3 id="&#25511;&#21046;&#27969;">&#25511;&#21046;&#27969;</h3>
<p><strong>&#26631;&#20934;&#30340;if else</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p.test &lt;-<span class="st"> </span>function(p) {
    if (p &lt;=<span class="st"> </span><span class="fl">0.05</span>)
        <span class="kw">print</span>(<span class="st">&quot;yeah!!!!&quot;</span>) else if (p &gt;=<span class="st"> </span><span class="fl">0.9</span>)
        <span class="kw">print</span>(<span class="st">&quot;high!!!!&quot;</span>) else <span class="kw">print</span>(<span class="st">&quot;somewhere in the middle&quot;</span>)
}

<span class="kw">p.test</span>(<span class="fl">0.5</span>)
## [1] &quot;somewhere in the middle&quot;</code></pre></div>
<p><strong>ifelse(test, yes, no)</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p.test<span class="fl">.2</span> &lt;-<span class="st"> </span>function(p) {
    <span class="kw">ifelse</span>(p &lt;=<span class="st"> </span><span class="fl">0.05</span>, <span class="kw">print</span>(<span class="st">&quot;yippee&quot;</span>), <span class="kw">print</span>(<span class="st">&quot;bummer, man&quot;</span>))
}

x &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">1</span>)
x
##  [1] 0.27332 0.14155 0.89000 0.07041 0.79419 0.25013 0.02324 0.86766
##  [9] 0.41114 0.56165

<span class="kw">p.test</span>(x)

## Warning: the condition has length &gt; 1 and only the first element will be used
## Warning: the condition has length &gt; 1 and only the first element will be used

## [1] &quot;somewhere in the middle&quot;

<span class="kw">p.test.2</span>(x)

## [1] &quot;yippee&quot;
## [1] &quot;bummer, man&quot;

##  [1] &quot;bummer, man&quot; &quot;bummer, man&quot; &quot;bummer, man&quot; &quot;bummer, man&quot; &quot;bummer, man&quot;
##  [6] &quot;bummer, man&quot; &quot;yippee&quot;      &quot;bummer, man&quot; &quot;bummer, man&quot; &quot;bummer, man&quot;</code></pre></div>
<h3 id="&#20854;&#20182;&#30340;&#25511;&#21046;&#27969;&#21521;&#37327;&#21270;&#30340;&#26041;&#27861;">&#20854;&#20182;&#30340;&#25511;&#21046;&#27969;&#21521;&#37327;&#21270;&#30340;&#26041;&#27861;</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p<span class="fl">.1000</span> &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dt">n =</span> <span class="dv">1000</span>, <span class="dt">min =</span> <span class="dv">0</span>, <span class="dt">max =</span> <span class="dv">1</span>)
p.ifelse &lt;-<span class="st"> </span><span class="kw">ifelse</span>(p<span class="fl">.1000</span> &lt;<span class="st"> </span><span class="fl">0.05</span>, <span class="dv">1</span>, <span class="dv">0</span>)  <span class="co"># If it is less than 0.05, then you get a 1, otherwise 0.</span>

<span class="kw">sum</span>(p.ifelse)/<span class="kw">length</span>(p<span class="fl">.1000</span>)
## [1] 0.059

<span class="co">#Same number, faster and simpler computation.</span>
<span class="kw">length</span>(p<span class="fl">.1000</span>[p<span class="fl">.1000</span> &lt;<span class="st"> </span><span class="fl">0.05</span>])/<span class="kw">length</span>(p<span class="fl">.1000</span>)
## [1] 0.059</code></pre></div>
<h3 id="&#31616;&#21333;&#30340;loop">&#31616;&#21333;&#30340;loop</h3>
<p><strong>while() {}</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">i &lt;-<span class="st"> </span><span class="dv">1</span>
while (i &lt;=<span class="st"> </span><span class="dv">10</span>) {
    <span class="kw">print</span>(i)
    i &lt;-<span class="st"> </span>i +<span class="st"> </span><span class="fl">0.5</span>
}

## [1] 1
## [1] 1.5
## [1] 2
## [1] 2.5
## [1] 3
## [1] 3.5
## [1] 4
## [1] 4.5
## [1] 5
## [1] 5.5
## [1] 6
## [1] 6.5
## [1] 7
## [1] 7.5
## [1] 8
## [1] 8.5
## [1] 9
## [1] 9.5
## [1] 10</code></pre></div>
<p><strong>for() {}</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
for (i in <span class="dv">1</span>:<span class="dv">10</span>) {
    <span class="kw">print</span>(i)
}

## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5
## [1] 6
## [1] 7
## [1] 8
## [1] 9
## [1] 10

for (i in <span class="kw">seq</span>(<span class="dt">from =</span> <span class="dv">1</span>, <span class="dt">to =</span> <span class="dv">5</span>, <span class="dt">by =</span> <span class="fl">0.5</span>)) {
    <span class="kw">print</span>(i)
}

## [1] 1
## [1] 1.5
## [1] 2
## [1] 2.5
## [1] 3
## [1] 3.5
## [1] 4
## [1] 4.5
## [1] 5</code></pre></div>
<p>&#21478;&#22806;&#65292;R&#20013;&#23383;&#31526;&#20018;&#26080;&#27861;&#36827;&#34892;&#22914;&#19979;&#25805;&#20316;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">for (letter in &#8220;word&#8221;) {
    <span class="kw">print</span>(letter)
}

## [1] &quot;word&quot;</code></pre></div>
<p>&#26367;&#20195;&#26041;&#27861;&#26159;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw">strsplit</span>(&#8220;word&#8221;, <span class="dt">split =</span> &#8220;&#8221;)

## [[1]]
## [1] &quot;w&quot; &quot;o&quot; &quot;r&quot; &quot;d&quot;

for (letter in <span class="kw">strsplit</span>(<span class="st">&quot;word&quot;</span>, <span class="dt">split =</span> <span class="st">&quot;&quot;</span>)) {
    <span class="kw">print</span>(letter)
}

## [1] &quot;w&quot; &quot;o&quot; &quot;r&quot; &quot;d&quot;</code></pre></div>
<h3 id="&#26356;&#22810;&#38656;&#35201;&#36991;&#20813;&#30340;&#24490;&#29615;">&#26356;&#22810;&#38656;&#35201;&#36991;&#20813;&#30340;&#24490;&#29615;</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
for (i in <span class="dv">1</span>:<span class="dv">100</span>) {
        <span class="kw">print</span> (<span class="kw">rnorm</span>(<span class="dt">n=</span><span class="dv">1</span>, <span class="dt">mean =</span> <span class="dv">0</span>, <span class="dt">sd =</span> <span class="dv">1</span>))
}

## [1] -0.1837
## [1] -0.9313
## [1] 1.648
## [1] -0.6964
## [1] 0.2112
## [1] 0.3441
## [1] 1.036
## .........
## [1] -0.8865
## [1] 0.981
## [1] 0.5333</code></pre></div>
<p>&#25105;&#20204;&#24847;&#22312;&#27599;&#20010;&#24490;&#29615;&#29983;&#25104;1&#20010;&#38543;&#26426;&#25968;&#65292;&#20854;&#23454;&#26159;&#19981;&#38656;&#35201;&#30340;&#65292;&#23436;&#20840;&#21487;&#20197;&#36825;&#26679;&#20889;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rnorm</span>(<span class="dt">n =</span> <span class="dv">100</span>, <span class="dt">mean =</span> <span class="dv">0</span>, <span class="dt">sd =</span> <span class="dv">1</span>)

##   [1] -0.08683 -1.55262 -1.16909  0.30451 -1.14555  0.76682  0.12643
##   [8] -0.61174 -0.29103 -0.10707 -0.03397 -0.05926  0.27294  1.32693
##  [15] -0.53284  1.83234  0.43959 -0.88991  0.25383  0.96709 -0.23210
##  [22] -1.00190 -1.32289  1.80030  1.15272 -1.82907  0.75989  1.35966
##  [29]  0.53943  0.01429 -0.58707 -0.11886 -0.70367 -2.38988  0.08033
##  [36] -0.22795 -0.62166 -0.19832 -1.95990 -0.85127  0.94236  0.37771
##  [43]  0.32617 -0.08393 -0.54506 -2.58781 -0.58433  0.20985 -0.41613
##  [50]  0.60527  0.51713  1.57950 -0.61079 -0.28564 -0.16444  0.55007
##  [57]  0.57258  0.58513 -0.86728 -0.81185 -0.29333 -1.23935  0.46169
##  [64] -1.53586 -0.32583  0.17629 -0.85579  1.04989  1.22120  1.53359
##  [71] -2.37276  1.44393  1.47506  0.40110 -0.10157  0.35485 -0.72068
##  [78] -1.27910  0.63152 -0.65216  1.60160  0.27109  0.50904 -1.00531
##  [85]  0.76743 -0.78954 -0.01159  1.06944  1.15661 -0.91031  1.54919
##  [92] -0.84334  2.19994  0.26716  0.02081  0.53577  0.07840 -0.79387
##  [99] -1.18941  1.24745</code></pre></div>
<p>&#36824;&#26377;&#65292;&#24403;&#25105;&#20204;&#24819;&#35201;&#21021;&#22987;&#21270;&#19968;&#20010;&#21521;&#37327;&#20197;&#23384;&#20648;&#25152;&#26377;&#30340;&#25968;&#20540;&#26102;&#65292;&#20250;&#36825;&#26679;&#24178;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">n &lt;-<span class="st"> </span><span class="fl">1e+5</span>
<span class="kw">head</span>(x)

## [1] NA NA NA NA NA NA

for (i in <span class="dv">1</span>:n) {
    x[i] &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dt">n =</span> <span class="dv">1</span>, <span class="dt">mean =</span> <span class="dv">0</span>, <span class="dt">sd =</span> <span class="dv">1</span>)
}
<span class="kw">head</span>(x)

## [1]  0.2848 -0.5432  1.1391 -1.0901  0.8515  0.5490</code></pre></div>
<p>&#28982;&#32780;&#65292;&#36825;&#26159;&#21313;&#20998;&#20302;&#25928;&#30340;&#20570;&#27861;&#65292;&#24456;&#32791;&#26102;&#38388;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">system.time</span>(

for (i in <span class="dv">1</span>:n){
    x[i] &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dt">n=</span><span class="dv">1</span>, <span class="dt">mean=</span><span class="dv">0</span>, <span class="dt">sd=</span><span class="dv">1</span>)})

##    user  system elapsed
##   0.562   0.023   0.584

<span class="co">#We can also use the replicate function to do the same thing. Easier syntax to write.</span>

<span class="kw">system.time</span>(z &lt;-<span class="st"> </span><span class="kw">replicate</span>(n, <span class="kw">rnorm</span>(<span class="dt">n =</span> <span class="dv">1</span>, <span class="dt">mean =</span> <span class="dv">0</span>, <span class="dt">sd =</span> <span class="dv">1</span>)))

##    user  system elapsed
##   0.561   0.035   0.841</code></pre></div>
<p>&#24456;&#26174;&#28982;&#65292;&#31532;&#20108;&#31181;&#20570;&#27861;&#20063;&#24456;&#20302;&#25928;&#12290;&#20854;&#23454;&#65292;R&#23601;&#26159;&#21521;&#37327;&#21270;&#30340;&#65292;&#21487;&#20197;&#30452;&#25509;&#36825;&#26679;&#20570;&#65306;</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">rnorm</span>(n, <span class="dv">0</span>, <span class="dv">1</span>)
<span class="kw">system.time</span>(y &lt;-<span class="st"> </span><span class="kw">rnorm</span>(n, <span class="dv">0</span>, <span class="dv">1</span>))

##    user  system elapsed
##   0.010   0.000   0.011</code></pre></div>
<p>&#22240;&#27492;&#65292;&#35831;&#35760;&#20303;&#65292;<strong>&#22312;R&#20013;&#24490;&#29615;&#24635;&#26159;&#27604;&#20989;&#25968;&#23478;&#26063;&#30340;&#24212;&#29992;&#35201;&#24930;&#65288;&#22823;&#25968;&#25454;&#38500;&#22806;&#65289;&#65292;&#32780;&#21518;&#32773;&#35201;&#27604;&#21521;&#37327;&#21270;&#35745;&#31639;&#24930;</strong>&#12290;</p>
</body>
</html>
